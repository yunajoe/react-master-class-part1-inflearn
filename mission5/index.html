<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <script
      src="https://unpkg.com/react@18/umd/react.development.js"
      crossorigin
    ></script>
    <script
      src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
      crossorigin
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      function FruitList({ items }) {
        const safe = items ?? [];
        if (safe.length === 0) {
          return <p>표시할 과일이 없습니다.</p>;
        }
        return (
          <ul>
            {safe.map((fruit) => (
              <li key={fruit}>{fruit}</li>
            ))}
          </ul>
        );
      }
      function CheapProducts({ items, max = 100000 }) {
        const safe = items ?? [];
        const cheap = safe.filter(
          (p) => typeof p.price === "number" && p.price <= max,
        );
        if (cheap.length <= 0) {
          return <em>조건에 맞는 상품이 없습니다.</em>;
        }
        return (
          <ul>
            {cheap.map((p) => (
              <li key={p.id}>
                {p.name} - {p.price.toLocaleString()}원
              </li>
            ))}
          </ul>
        );
      }

      function ProductSearch({ items, query, maxPrice = 20000 }) {
        const safe = items ?? [];
        const q = query.trim().toLowerCase();
        const result = safe.filter((item) => {
          const nameCheck = item.name.trim().toLowerCase().includes(q);
          const priceCheck =
            typeof item.price === "number" && item.price <= maxPrice;
          return nameCheck && priceCheck;
        });

        return result.map((item) => (
          <ul>
            <li>{item.name}</li>
            <li>{item.price.toLocaleString()}원</li>
          </ul>
        ));
      }

      function App() {
        const fruits = ["사과", "바나나", "체리"];
        const products = [
          { id: 1, name: "Keyboard", price: 30000 },
          { id: 2, name: "Mouse", price: 15000 },
          { id: 3, name: "Monitor", price: 220000 },
        ];
        return (
          <>
            <FruitList items={fruits} />
            <CheapProducts items={products} />
          </>
        );
      }
      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
